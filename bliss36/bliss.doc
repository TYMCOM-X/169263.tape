


            BLISS-36 Release 4 For TOPS-10: Release Notes
                             10-Sep-1983
BLISS-36 Release 4 For TOPS-10: Release Notes                   Page 2


                                   CONTENTS

        1       INTRODUCTION . . . . . . . . . . . . . . . . . . . . 3
        2       NEW FEATURES . . . . . . . . . . . . . . . . . . . . 3
        3       COMMON CHANGES . . . . . . . . . . . . . . . . . . . 3
        3.1       New /CROSS_REFERENCE Qualifier . . . . . . . . . . 3
        3.2       New /CHECK Qualifier . . . . . . . . . . . . . . . 3
        3.3       INITIAL Or PRESET On Local Storage . . . . . . . . 4
        3.4       New Lexical Function %QUOTENAME  . . . . . . . . . 4
        3.5       %CHAR Supports 8-bit ASCII Codes . . . . . . . . . 4
        3.6       NULLPARAMETER Change . . . . . . . . . . . . . . . 4
        3.7       BIND To CTCE Permitted In LIBRARY Precompilation . 4
        3.8       FIELD Names Permitted In Field-component . . . . . 5
        3.9       Changes To Listing Format  . . . . . . . . . . . . 5
        4       VAX/VMS SPECIFIC CHANGES . . . . . . . . . . . . . . 5
        4.1       Installation Uses VMSINSTAL  . . . . . . . . . . . 5
        4.2       Larger LIBRARY Files Supported . . . . . . . . . . 5
        5       CHANGES TO UNSUPPORTED TOOLS . . . . . . . . . . . . 5
        5.1       BLSCRF - BLISS Cross Referencer  . . . . . . . . . 6
        5.2       PRETTY - BLISS Source Formatter  . . . . . . . . . 6
        6       RESTRICTIONS . . . . . . . . . . . . . . . . . . . . 6
        7       CHANGES TO UNSUPPORTED SOFTWARE  . . . . . . . . . . 7
        7.1       XPORT - Transportable BLISS Programming Tools  . . 8
        7.2       SIX12 - BLISS Symbolic Debugger  . . . . . . . . . 8
        7.3       TENDEF.R36 System Interface File . . . . . . . . . 8
        8       KNOWN BUGS . . . . . . . . . . . . . . . . . . . . . 8
        9       FOR FURTHER HELP . . . . . . . . . . . . . . . . . . 8
        10      COMPONENTS . . . . . . . . . . . . . . . . . . . . . 9
BLISS-36 Release 4 For TOPS-10: Release Notes                   Page 3


1  INTRODUCTION

This document provides information pertaining to BLISS-36 Version 4.



2  NEW FEATURES

Version 4 of the BLISS language is upward compatible with version 3.

The format of pre-compiled library files generated by  the  version  3
compiler  is not compatible with the version 4 compiler.  Pre-compiled
BLISS  libraries  must  be  recompiled  with  the  version  4.0  BLISS
compiler.   Failure  to  do  so  will be diagnosed by the compiler and
treated as an error.  This incompatibility is introduced in  order  to
remove the restriction on the size of LIBRARY files.  We apologize for
any inconvenience caused by this change.



3  COMMON CHANGES

This section discusses new language and compiler  features  which  are
common to BLISS-32, BLISS-36 and BLISS-16.



3.1  New /CROSS_REFERENCE Qualifier

A new command qualifier, /CROSS_REFERENCE, may be specified to  obtain
a  complete  symbol  cross-reference in the listing file.  Another new
qualifier, /MASTER_CROSS_REFERENCE, may be used to generate  a  binary
encoded  data  file  containing cross-reference information.  The data
files produced by the compilation of several modules are read  by  the
BCREF  utility  included  in  the kit to produce a multi-module symbol
cross-reference.



3.2  New /CHECK Qualifier

BLISS will now optionally detect certain language usage that, although
technically  permitted,  is likely to be a user error.  The conditions
detected are:

      o  CHECK(INITIAL) -  Use of an uninitialized LOCAL,  STACKLOCAL,
         and REGISTER data segment.

      o  CHECK(REDECLAR) -  Redeclaration of a name in a nested scope.

      o  CHECK(OPTIMIZE) -   Code  and  boolean  tests  that  can   be
         eliminated as an optimization because the code is unreachable
         or the test can be determined at compile-time.
BLISS-36 Release 4 For TOPS-10: Release Notes                   Page 4


      o  CHECK(FIELD) -  Use of a field name in a structure access  to
         a data segment that has no field-attribute.




3.3  INITIAL Or PRESET On Local Storage

The restriction that the initial-values  must  be  link-time  constant
expressions  has  been  removed  for  LOCAL,  STACKLOCAL, and REGISTER
declarations.



3.4  New Lexical Function %QUOTENAME

The %QUOTENAME permits one to construct the name of a  macro  as  with
%NAME,  but  the  name  is  quoted as with %QUOTE and the macro is not
expanded.  Thus one can do the following:

     MACRO %NAME( 'A_', %NUMBER(COUNT) ) = ...

     %IF %DECLARED( %QUOTENAME( 'A_', %NUMBER(COUNT) ) ) %THEN ...

Using just %NAME, there is no way to construct the macro name  without
also causing the macro to expand.



3.5  %CHAR Supports 8-bit ASCII Codes

The %CHAR function can now  be  used  to  construct  a  quoted  string
containing  ASCII  codes  in  the range 0 to 255.  Its chief use is to
insert non-printing characters into quoted strings.



3.6  NULLPARAMETER Change

The   actual-parameter   to   be   tested   by    the    NULLPARAMETER
linkage-function  may  now be specified by supplying the corresponding
formal-parameter name as parameter to NULLPARAMETER.  It may  also  be
specified as previously by number.



3.7  BIND To CTCE Permitted In LIBRARY Precompilation

BIND  and  BIND  ROUTINE  declarations  are   permitted   in   LIBRARY
precompilation  with  the  restriction  that  the data-name-value be a
compile-time constant expression.  This feature will be most useful in
BLISS-16  and  BLISS-36,  where it can be used to include BIND ROUTINE
declarations using the EMT and JSYS linkage types in LIBRARY files.
BLISS-36 Release 4 For TOPS-10: Release Notes                   Page 5


3.8  FIELD Names Permitted In Field-component

A FIELD name may now be used as a field-component in  the  declaration
of another field-name.  The following is an example of this usage.

     FIELD A = [1, 0, %BPVAL, 0];

     FIELD B = [A];



3.9  Changes To Listing Format

Several minor changes were made to the listing format.   For  example,
the   BEGIN-END   block   nesting  depth  is  now  printed  after  the
line-number, and compilation speed in terms of both lines and  lexemes
per minute is printed at the end of the compilation.



4  VAX/VMS SPECIFIC CHANGES

4.1  Installation Uses VMSINSTAL

The BLISS kit is now installed using VMSINSTAL rather than VMSUPDATE.



4.2  Larger LIBRARY Files Supported

The previous restriction on the size of LIBRARY files  (approx.   1000
pages)  has  been  removed.   Pre-compiled  BLISS  libraries  must  be
recompiled with the version 4.0 BLISS compiler.  Failure to do so will
be   diagnosed  by  the  compiler  and  treated  as  an  error.   This
incompatibility is introduced in order to remove  the  restriction  on
the  size of LIBRARY files.  We apologize for any inconvenience caused
by this change.



5  CHANGES TO UNSUPPORTED TOOLS


                                 NOTE

        This section describes  components  of  the  BLISS  V4
        release  which  are  NOT  supported by Digital.  These
        items are provided only as a service to our users.

See the User's Guide for information concerning these tools.
BLISS-36 Release 4 For TOPS-10: Release Notes                   Page 6


5.1  BLSCRF - BLISS Cross Referencer

The BLSCRF cross-reference utility is  no  longer  provided  in  BLISS
releases.   It has been superseded by the new cross-reference facility
(see /CROSS_REFERENCE above).



5.2  PRETTY - BLISS Source Formatter

PRETTY is no longer  provided  in  BLISS  releases.   It  will  become
available through DECUS.



6  RESTRICTIONS

This section summarizes  restrictions  with  the  V4  release.   Where
possible, temporary solutions are described.




PROBLEM:PROBLEM:  The following code fragment

                d = 0;
                .....
                WHILE .d NEQ 0 DO
                    BEGIN
                    ....
                    x = 66 / .d;        ! Assume "d" never written
                    ...
                    IF .y THEN EXITLOOP
                    END

          will cause a zero-divide exception at  execution  time  when
          compiled  using  normal optimization.  The compiler believes
          that the expression "66/.d" is loop invariant and moves  the
          computation out of the loop.

SOLUTION:SOLUTION: This is a restriction in V4.  In this particular  case,  the
          expression could be rewritten as:

                WHILE 1 DO
                    BEGIN
                    .....
                    IF .d EQL 0 THEN EXITLOOP;
                    ....
                    x = 66 / .d;
                    .....
                    END;

          In this case, the expression cannot  be  moved  out  of  the
          loop.
BLISS-36 Release 4 For TOPS-10: Release Notes                   Page 7


PROBLEM:PROBLEM:  Inco code generated for structure  definitions  of  the
          form:

                STRUCTURE BAD[I,P,S]= [%UPVAL]
                    (IF .I THEN BAD ELSE BAD + .BAD<16,16>)<P,S>;

                OWN X: BAD[];
                LOCAL T;

                T = .X[.T,0,12];

          "X" is loaded into a register in the  THEN-branch,  but  the
          ELSE-branch uses the register without loading it.

SOLUTION:SOLUTION: This is the result of a design flaw  in  the  way  structure
          references  are  expanded.  BLISS semantics guarantee that a
          structure actual-parameter is evaluated only once.  This  is
          implemented  by treating the first occurrence of a structure
          formal  as  if  it  was  a  BIND  declaration.   The   other
          occurrences  of  the structure formal are then treated as if
          they were uses of the "imaginary" bind-name.  This choice of
          implementation  fails  when  the  first  occurrence  of  the
          structure formal is in conditional flow!  The problem can be
          avoided by insuring that the first occurrence of each formal
          is outside  of  conditional  flow.   The  example  structure
          should be written as:

                STRUCTURE GOOD[I,P,S] = [%UPVAL]
                    (GOOD; IF .I THEN GOOD ELSE GOOD+.GOOD<16,16>)<P,S>;

          Note that the  "structure-name"  is  the  zero-th  structure
          formal  parameter.  The formals "I", "P" and "S" are already
          outside  of  conditional  flow,  so   they   are   processed
          correctly.   This  change  will  cause  the  compiler to use
          slightly  more  memory,  but  the  resulting  code  will  be
          correct.   There  should  be  no  reduction  in optimization
          either.

          Be aware that there is no problem when the conditional  flow
          is  constant-folded  at  compile-time,  or  when there is no
          conditional flow in the structure body.







7  CHANGES TO UNSUPPORTED SOFTWARE

As a courtesy to our users, some  unsupported  development  tools  are
shipped with the BLISS distribution.
BLISS-36 Release 4 For TOPS-10: Release Notes                   Page 8


7.1  XPORT - Transportable BLISS Programming Tools

A maintenance release of XPORT appears in the version 3 release.



7.2  SIX12 - BLISS Symbolic Debugger

SIX12 has been upgraded to include  many  new  features  developed  by
Carnegie-Mellon  University  and  has  been re-written in BLISS-36 and
extensively commented.  This should make it much easier for  users  to
tailor the debugger to their own needs.

Included in this release is  a  machine-readable  manual  -  SIX12.MEM
which serves as a reference manual for the debugger.



7.3  TENDEF.R36 System Interface File

Two   STRUCTUREs   have   been   defined   in   TENDEF   to   simplify
systems-programming  with  the  MONSYM  and  UUOSYM system interfaces.
These are MONWORD and MONVEC data structures.  For information on  how
to  use this, examine TENDEF.R36 or consult the BLISS-36 User's Guide,
(Tools, Libraries and System Interfaces, Chapter 9).



8  KNOWN BUGS


      o  A /VARIANT switch in  SWITCH.INI  will  override  a  /VARIANT
         switch in the BLISS command line.




9  FOR FURTHER HELP

     A number of sources of additional help are available.

      o  For information on command interface -- "HLP:BLISS.HLP"  Just
         type "HELP BLISS" to the monitor.

      o  Further  information  on   command   interface   --   command
         completion that is, use ?  during command type-in.

      o  Language information -- "BLISS  Language  Guide":   Documents
         the  BLISS  language.   The  Third  Edition,  which documents
         version  3  of  BLISS  is  available  as  SDC  order   number
         AA-H275C-TK.

      o  Compiler information -- "BLISS-36 User's  Guide":   Describes
         use  of  the  BLISS-36  compiler,  some  available tools, and
         machine  specific  features.   The   Third   Edition,   which
BLISS-36 Release 4 For TOPS-10: Release Notes                   Page 9


         documents  version  3  of  BLISS-36 is available as SDC order
         number AA-H712C-TK.

      o  Syntax summary -- "BLISS Pocket  Guide":   Available  as  SDC
         order number AV-H289C-TK.

      o  BLISS course -- A course in the BLISS programming language is
         available  from  DEC.  Your system manager may obtain further
         information by contacting DEC Educational Services.

      o  BLISS-36 debugger (SIX12):  "HLP:SIX12.HLP":  Just type "HELP
         SIX12" to the monitor.

      o  Simple  terminal  I/O:   "HLP:TUTIO.HLP":   Just  type  "HELP
         TUTIO" to the monitor.

      o  Conversion   of   BLISS-10   programs    to    BLISS-36    --
         "HLP:CVT10.HLP":  Just type "HELP CVT10" to the monitor.  For
         greater detail see the file "DOC:CVT10.DOC".

      o  Monitor interfaces -- "DOC:MONINT.DOC".

      o  Examining ".REL" files -- "HLP:DMPREL.HLP":  Just type  "HELP
         DMPREL" to the monitor.




10  COMPONENTS

     Below is a list of the major components of the  BLISS-36  system.
Full  support  is  available  only for the BLISS compiler itself.  The
other components are unsupported but will be maintained to the  extent
our resources allow.

      o  BLISS -- The BLISS-36 compiler itself.

      o  EZIO and TUTIO -- I/O utilities for BLISS-36.

      o  Monitor Interfaces -- definitions necessary  for  interfacing
         with the TOPS-10 and TOPS-20 monitors.

      o  CVT10 -- BLISS-10 to BLISS-36 conversion program.

      o  SIX12 -- High level debugger for BLISS-36.

      o  XPORT -- Transportable BLISS programming tools

 b%[G¿